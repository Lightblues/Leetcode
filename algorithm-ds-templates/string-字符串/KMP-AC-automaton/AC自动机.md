## KMP

- <https://oi-wiki.org/string/kmp/>

关键是「部分匹配表/失配函数」, 也即匹配失败之后下一个要匹配的位置.

- 部分匹配表，又称为失配函数，作用是让算法无需多次匹配S中的任何字符。能够实现线性时间搜索的关键是在主串的一些字段中检查模式串的初始字段，可以确切地知道在当前位置之前的一个潜在匹配的位置。换句话说，在不错过任何潜在匹配的情况下，"预搜索"这个模式串本身并将其译成一个包含所有可能失配的位置对应可以绕过最多无效字符的列表。
- 例如, 对于 aaa, 字符串的前缀函数应该是 `pi=[0,1,2]`, 定义为 s[0...i] 的 真前缀和后缀相等的最大长度 (显然 pi[0]=0)
- 而其 `nxt=[-1,0,1]`, 这是为了和编程语言中数组从0开始index保持一致. 例如当要匹配第2个元素时, 若失败, 可知 s[0...2] 的前缀函数值为2
- 在下面的 search函数中, 遍历的j表示当前匹配到了字符串a的多少长度

## AC自动机

- <https://oi-wiki.org/string/ac-automaton/>

!!! note
    AC 自动机需要对于一句话 query 同时匹配多个 pattern, 而不是 KMP 中的一个特定的单词. 因此, 采用 Trie 存储这些词 (节点表示状态, 边表示转移的字符, 叶子结点表示一个词); 重点在于, 类似 KMP (中的 nxt列表), 对于每一个节点构造一个 fail指针, fail[i, ch] 表示对于i这一节点, 当下一个字符为ch, 而当前节点下无法继续匹配时, 应该从哪里重新开始匹配 (另一个分支上).

- Trie 树
    - 应用: 1. 字符串检索; 2. 字符串最长公共前缀:Trie树利用多个字符串的公共前缀来节省存储空间，反之，当我们把大量字符串存储到一棵trie树上时，我们可以快速得到某些字符串的公共前缀; 3. 排序:Trie树是一棵多叉树，只要先遍历整棵树，输出相应的字符串便是按字典序排序的结果
- AC 自动机
    - AC自动机是最一种多模式匹配算法，它由贝尔实验室的两位研究人员Alfred V. Aho 和 Margaret J.Corasick 于1975年发明，几乎与KMP算法同时问世，至今仍然在模式匹配领域被广泛应用。例如：在一篇文章中，需要找到多个词汇所在的位置和出现频率。
    - 其核心算法仍是寻找模式串内部规律，进行每次失配的高效跳转。这点和KMP算法一致，不同点在于,AC自动机寻找模式串的相同前缀。
